<!DOCTYPE html>
<html lang="en" class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta charset="utf-8" />
    <meta name="keywords" content="ConditionalTransaction,ISAMTransaction,TransactionScope,SupportsTransactions">

    <title>Special Transaction Behaviour</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="assets/css/toc.css" />
    <link rel="stylesheet" href="assets/css/highlight.css" />
    <link rel="stylesheet" href="assets/css/prism.css" />
    <link rel="stylesheet" href="assets/css/prism-csdiff.css" />


    <link rel="stylesheet" href="assets/css/theme_firefly.css" />
    <link rel="stylesheet" href="assets/css/mermaid.css" />
</head>

<body class="markdown-body" role="document">
    <div class="wrapper">

        <div class="middle">

            <div class="container">

                <div class="content" role="navigation" aria-label="footer navigation">
                    <a id="previousButton" class="btn btn-neutral float-left" style="visibility:hidden">Previous</a>
                    <a id="nextButton" class="btn btn-neutral float-right" style="visibility:hidden">Next</a>
                </div>
                <div class="content"><h1 id="special-transaction-behaviour">Special Transaction Behaviour</h1>
<p>The <code>TransactionScope</code> Property controls the timing of when a transaction opens.</p>
<p><strong>BUT</strong> it actually has two different behaviours controlled by the <code>ConditionalTransaction</code> in the <code>UserSettings</code> class.</p>
<h1 id="conditionaltransaction">ConditionalTransaction</h1>
<p>Controls if a transaction will be opened according to the <code>TransactionScope</code> property, or if there are additional requirements.</p>
<p>In ther ini file, this settings is determined by the poorly named <code>ISAMTransaction</code> flag.</p>
<p>When <code>ISAMTransaction = Y</code> then <code>ConditionalTransaction</code> is set to false and when <code>ISAMTransaction = N</code> then <code>ConditionalTransaction</code> is set to true.</p>
<p>Unfortunately in most magic applications, this setting is set to N causing a subtle behavior that requires explanation.</p>
<h2 id="conditionaltransaction-true-isamtransaction-n">ConditionalTransaction = true (ISAMTransaction = N)</h2>
<p>When a controller starts is about to start a transaction according to the <code>TransactionScope</code> setting - it'll first check the call stack for an <code>Entity</code> that comes from an SQL data source. Only if it finds an <code>Entity</code> that comes from an SQL data source - it'll open a transaction, otherwise it'll ignore the <code>TransactionScope</code> property - for example if the <code>Entity</code> is from an XML or Memory or Btrieve source.</p>
<p>Unfortunately this behavior was the default in magic for most applications and as such is the default behaviour for most migrated applications.</p>
<p>Whe we say &quot;an <code>Entity</code> that comes from an SQL data source&quot; this actually depends on the <a href="http://www.fireflymigration.com/reference/html/P_Firefly_Box_Data_DataProvider_IEntityDataProvider_SupportsTransactions.htm">SupportsTransactions</a> property of the <code>Entity</code>'s <code>DataProvider</code></p>
<h2 id="conditionaltransaction-false-isamtransaction-y">ConditionalTransaction = false (ISAMTransaction = Y)</h2>
<p>A transaction will be started according to the <code>TransactionScope</code> property.</p>



                        <a id="previousButton" class="btn btn-neutral float-left" style="visibility:hidden">Previous</a>

                        <a id="nextButton" class="btn btn-neutral" style="visibility:hidden;float:right">Next</a>
                    <hr />Help us improve,
                    <a href="https://github.com/FireflyMigration/firefly-doc/blob/master//20-Getting-Familiar-with-Migrated-Code/50-DataAccess/50-Transactions-and-locking/09-Special-Transaction-Behaviour.md" target="_blank">Edit this page on GitHub</a>
                    <br /> or email us at
                    <a href="mailto:info@fireflymigration.com?Subject=Firefly%20Documentation%20Website" target="_top">info@fireflymigration.com</a>
                </div>

                <!-- .content -->




            </div>
            <!-- .container-->

            <aside class="left-sidebar">
                <div class="wy-side-nav-search-ff">
                    <a href="" class="test">
                        <img src="assets/img/logo-big.png">
                    </a>
                </div>
                <div id="menuTree" </div>
            </aside>
            <!-- .left-sidebar -->

            <aside class="right-sidebar"></aside>
            <!-- .right-sidebar -->

            </div>
            <!-- .middle-->



        </div>


        <script src="assets/js/mermaid.js"></script>
        <script src="assets/js/prism-start.js"></script>
        <script src="assets/js/prism-clike.js"></script>
        <script src="assets/js/prism-markup.js"></script>
        <script src="assets/js/prism-css.js"></script>
        <script src="assets/js/prism-javascript.js"></script>

        <script src="assets/js/prism-diff.js"></script>
        <script src="assets/js/prism-csdiff.js"></script>
        <script src="assets/js/prism-function.js"></script>

        <script src="assets/js/jquery-3.1.1.js"></script>


        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-4806432-3', 'auto');
            ga('send', 'pageview');

        </script>
        <script src="assets/js/tree.js"></script>
        <script language="javascript">
            buildTree('menuTree', 'special-transaction-behaviour.html', 'previousButton', 'nextButton');
        </script>
</body>

</html>