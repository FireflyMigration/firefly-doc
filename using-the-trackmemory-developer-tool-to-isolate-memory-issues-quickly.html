<!DOCTYPE html>
<html lang="en" class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8" />
    <meta name="keywords" content="">

    <title>Using the TrackMemory developer tool to isolate memory issues quickly</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="assets/css/toc.css" />
    <link rel="stylesheet" href="assets/css/highlight.css" />
    <link rel="stylesheet" href="assets/css/prism.css" />
    <link rel="stylesheet" href="assets/css/prism-csdiff.css" />


    <link rel="stylesheet" href="assets/css/theme_firefly.css" />
    <link rel="stylesheet" href="assets/css/mermaid.css" />
</head>

<body class="markdown-body" role="document">
    <div class="wrapper" id="root">
        <div class="backdrop"></div>
        <div class="top-bar" role="navigation" aria-label="footer navigation">
            <div style="display:flex;">
                <div>
                    <a id="menu" class="btn btn-neutral">&#9776; </a>
                </div>
                <img src="assets/img/logo-big.png">
            </div>
            <div>
                <a id="previousButton" class="btn btn-neutral" style="visibility:hidden">Previous</a>
                <a id="nextButton" class="btn btn-neutral" style="visibility:hidden">Next</a>
            </div>
        </div>
        <div class="middle">

            <div class="container">

                <div class="content"><h1 id="using-the-trackmemory-developer-tool-to-isolate-memory-issues-quickly">Using the TrackMemory developer tool to isolate memory issues quickly</h1>
<p>In this video we show how you can use the <code>TrackMemory</code> ini flag to isolate and reproduce memory issues or leaks.</p>
<h2 id="what-is-a-memory-leak-reproduction">What is a memory leak reproduction</h2>
<p>A memory leak reproduction is a set of steps that can be followed and represent a constant increase in memory, that if these steps are repeated again and again - you'll see a  constant increase in memory.</p>
<p>You can see that increase in the report that the <code>TrackMemory</code> flag shows - but it's crucial that this increase will be repetitive and if the steps are followed enough times will lead to hundreds of mb of memory usage, and eventually an out of memory exception.</p>
<p>Such an increase will either manifest itself as a constantly increasing count of a live <code>Controller</code> or a constantly increasing value in the memory information detailed when using <code>TrackMemory</code></p>
<p>Here are the memory counters that are documented when using the <code>TrackMemory</code> flag:</p>
<pre><code>  After GC Collect:
.Net Memory: 13
WorkingSet: 93
PeakWorkingSet: 122
PrivateMemorySize: 70
VirtualMemorySize: 318
Handles: 449
</code></pre>
<p>If you perform an operation N times (where N is at least 10) and see a constant increase in any of these values - then it's a start of a reproduction that can be investigated.</p>
<h2 id="what-is-not-a-memory-leak">What is not a memory leak</h2>
<p>If you run a controller, exit it and don't see a decrease in memory in the windows task manager - it's not enough to determine a memory leak.
Memory management in .NET is not necessarily linear - .NET uses a garbage collector to clear memory - when .NET sees fit and not necessarily after a controller is closed.</p>
<p>Also, some times controllers stay in memory due to some functions that still need to be aware of the last running controller.</p>
<p>Another case where a controller remains in memory is when <code>Cached&lt;&gt;</code> is used to call it.</p>
<hr />
<iframe width="560" height="315" src="https://www.youtube.com/embed/teR4BCWOrBs" frameborder="0" allowfullscreen></iframe>



                    <hr />Help us improve,
                    <a href="https://github.com/FireflyMigration/firefly-doc/blob/master//30-Maintaining-the-Migrated-Application/27-Debugging-the-Migrated-Application/50-Investigating-memory-issues/10-Using-the-TrackMemory-developer-tool-to-isolate-memory-issues-quickly.md" target="_blank">Edit this page on GitHub</a>
                    <br /> or email us at
                    <a href="mailto:info@fireflymigration.com?Subject=Firefly%20Documentation%20Website" target="_top">info@fireflymigration.com</a>
                </div>

                <!-- .content -->




            </div>
            <!-- .container-->

            <aside class="left-sidebar">
                <div class="wy-side-nav-search-ff">
                    <a href="" class="test">
                        
                    </a>
                </div>
                <div id="menuTree" </div>
            </aside>
            <!-- .left-sidebar -->

            <aside class="right-sidebar"></aside>
            <!-- .right-sidebar -->

            </div>
            <!-- .middle-->



        </div>


        <script src="assets/js/mermaid.js"></script>
        <script src="assets/js/prism-start.js"></script>
        <script src="assets/js/prism-clike.js"></script>
        <script src="assets/js/prism-markup.js"></script>
        <script src="assets/js/prism-css.js"></script>
        <script src="assets/js/prism-javascript.js"></script>

        <script src="assets/js/prism-diff.js"></script>
        <script src="assets/js/prism-csdiff.js"></script>
        <script src="assets/js/prism-function.js"></script>

        <script src="assets/js/jquery-3.1.1.js"></script>


        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-4806432-3', 'auto');
            ga('send', 'pageview');

        </script>
        <script src="assets/js/tree.js"></script>
        <script language="javascript">
            buildTree('menuTree', 'using-the-trackmemory-developer-tool-to-isolate-memory-issues-quickly.html', 'previousButton', 'nextButton');
        </script>
</body>

</html>