<!DOCTYPE html>
<html lang="en" class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta charset="utf-8" />
    <meta name="keywords" content="">

    <title>Saving and loading Entity Data using JSON</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="assets/css/toc.css" />
    <link rel="stylesheet" href="assets/css/highlight.css" />
    <link rel="stylesheet" href="assets/css/prism.css" />
    <link rel="stylesheet" href="assets/css/prism-csdiff.css" />


    <link rel="stylesheet" href="assets/css/theme_firefly.css" />
    <link rel="stylesheet" href="assets/css/mermaid.css" />
</head>

<body class="markdown-body" role="document">
    <div class="wrapper">

        <div class="middle">

            <div class="container">

                <div class="content" role="navigation" aria-label="footer navigation">
                    <a id="previousButton" class="btn btn-neutral float-left" style="visibility:hidden">Previous</a>
                    <a id="nextButton" class="btn btn-neutral float-right" style="visibility:hidden">Next</a>
                </div>
                <div class="content"><h1 id="saving-and-loading-entity-data-using-json">Saving and loading Entity Data using JSON</h1>
<p>using ENV.Web you can now easily save and load entity data to json.</p>
<p>First thing you'll need is to import the ENV.Web.dll which you can download from <a href="https://github.com/FireflyMigration/ENV.Web/releases">here</a></p>
<p>Next, add a using statement for the <code>ENV.Web.DataListHelpers</code> namesplaces.</p>
<p>Adding this namespace adds extention methods to entities making it easier to export them</p>
<h1 id="export-entity-data-to-json">Export Entity Data to Json</h1>
<pre data-line="" class="language-csdiff line-numbers"><code>var c = new Models.Orders();
File.WriteAllText(@"orders.json", c.ExportToJson()); </code></pre>
<h3 id="filtering">Filtering</h3>
<p>You can also filter the data</p>
<pre data-line="" class="language-csdiff line-numbers"><code>var c = new Models.Orders();
File.WriteAllText(@"orders.json", c.ExportToJson(c.ShipCity.IsEqualTo("London"))); </code></pre>
<p>You can also send an Order By if you want to.</p>
<h1 id="import-entity-data-from-json">Import Entity Data from JSON</h1>
<pre data-line="" class="language-csdiff line-numbers"><code>var c = new Models.Orders();
c.ImportFromJson(File.ReadAllText(@"orders.json")); </code></pre>
<h1 id="diving-deeper">Diving deeper</h1>
<p>The <code>ExportToJson</code> and <code>ImportToJson</code> are simple wrap methods around the <code>ViewModel</code> class and the <code>DataList</code> class.
If you want to have more control over the JSON file and the import process, you are welcome to use the <code>ViewModel</code> class and have all the control that is detailed in other articles in this document.</p>
<p>Here's the code for the <code>ExportToJson</code> and <code>ImportFromJson</code> methods to explain how it all works.</p>
<pre data-line="" class="language-csdiff line-numbers"><code>public static string ExportToJson(this ENV.Data.Entity entity, FilterBase where = null, Sort orderBy = null, params ColumnBase[] columns)
{
    var vmc = new ViewModel
    {
        From = entity
    };
    if (where != null)
        vmc.Where.Add(where);
    if (orderBy != null)
        vmc.OrderBy = orderBy;
    return vmc.ExportRows().ToJson();
}
public static void ImportFromJson(this ENV.Data.Entity entity, string json, bool ignoreDuplicateRows = false)
{
    var vmc = new ViewModel { From = entity };
    var dl = DataList.FromJson(json);
    vmc.ImportRows(dl, ignoreDuplicateRows: ignoreDuplicateRows);
} </code></pre>


                <br />
                        <a id="previousButton" class="btn btn-neutral float-left" style="visibility:hidden">Previous</a>

                        <a id="nextButton" class="btn btn-neutral" style="visibility:hidden;float:right">Next</a>
                    <hr />Help us improve,
                    <a href="https://github.com/FireflyMigration/firefly-doc/blob/master//30-Maintaining-the-Migrated-Application/95-Web-Development/00-ENV Web/Saving-and-loading-Entity-Data-using-JSON.md" target="_blank">Edit this page on GitHub</a>
                    <br /> or email us at
                    <a href="mailto:info@fireflymigration.com?Subject=Firefly%20Documentation%20Website" target="_top">info@fireflymigration.com</a>
                </div>

                <!-- .content -->




            </div>
            <!-- .container-->

            <aside class="left-sidebar">
                <div class="wy-side-nav-search-ff">
                    <a href="" class="test">
                        <img src="assets/img/logo-big.png">
                    </a>
                </div>
                <div id="menuTree" </div>
            </aside>
            <!-- .left-sidebar -->

            <aside class="right-sidebar"></aside>
            <!-- .right-sidebar -->

            </div>
            <!-- .middle-->



        </div>


        <script src="assets/js/mermaid.js"></script>
        <script src="assets/js/prism-start.js"></script>
        <script src="assets/js/prism-clike.js"></script>
        <script src="assets/js/prism-markup.js"></script>
        <script src="assets/js/prism-css.js"></script>
        <script src="assets/js/prism-javascript.js"></script>

        <script src="assets/js/prism-diff.js"></script>
        <script src="assets/js/prism-csdiff.js"></script>
        <script src="assets/js/prism-function.js"></script>

        <script src="assets/js/jquery-3.1.1.js"></script>


        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-4806432-3', 'auto');
            ga('send', 'pageview');

        </script>
        <script src="assets/js/tree.js"></script>
        <script language="javascript">
            buildTree('menuTree', 'saving-and-loading-entity-data-using-json.html', 'previousButton', 'nextButton');
        </script>
</body>

</html>