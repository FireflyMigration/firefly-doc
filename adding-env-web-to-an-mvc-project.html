<!DOCTYPE html>
<html lang="en" class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta charset="utf-8" />
    <meta name="keywords" content="">

    <title>Adding ENV Web to an MVC project</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="assets/css/toc.css" />
    <link rel="stylesheet" href="assets/css/highlight.css" />
    <link rel="stylesheet" href="assets/css/prism.css" />
    <link rel="stylesheet" href="assets/css/prism-csdiff.css" />


    <link rel="stylesheet" href="assets/css/theme_firefly.css" />
    <link rel="stylesheet" href="assets/css/mermaid.css" />
</head>

<body class="markdown-body" role="document">
    <div class="wrapper">

        <div class="middle">

            <div class="container">

                <div class="content" role="navigation" aria-label="footer navigation">
                    <a id="previousButton" class="btn btn-neutral float-left" style="visibility:hidden">Previous</a>
                    <a id="nextButton" class="btn btn-neutral float-right" style="visibility:hidden">Next</a>
                </div>
                <div class="content"><h1 id="adding-env-web-to-an-mvc-project">Adding ENV Web to an MVC project</h1>
<p>This article explains how to add the ENV.Web functionality to an MVC project.</p>
<p>It assumes that you've followed the steps outlined in <a href="configuring-an-mvc-project-with-to-reuse-migrated-applications.html">Configuring an MVC Project with to reuse Migrated Applications</a></p>
<ol>
<li>Download the <code>ENV.Web.dll</code> from the <a href="https://github.com/FireflyMigration/ENV.Web/releases">github repo</a></li>
<li>Place <code>ENV.Web.dll</code> in the lib folder.</li>
<li>Make sure that the dll is not blocked by windows, by opening the file properties and check the <code>unblock</code> checkbox.</li>
<li>Add a reference to it, in your MVC project.</li>
<li>Add a new controller and call it <code>DataApiController</code></li>
<li>Place the following code there:</li>
</ol>
<pre data-line="" class="language-csdiff line-numbers"><code>public class DataApiController : Controller
{
    static ENV.Web.DataApi _dataApi = new ENV.Web.DataApi();
    static DataApiController()
    {
    }
    // GET: DataApi
    public void Index(string name, string id = null)
    {
        _dataApi.ProcessRequest(name, id);
    }
} </code></pre>
<ol start="7">
<li>Edit the <code>RouteConfig</code> class to route to the added controller:</li>
</ol>
<pre data-line="4" class="language-csdiff line-numbers"><code>public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
     routes.MapRoute("DataApi", "dataApi/{name}/{id}", new { controller = "DataApi", action = "Index", name = UrlParameter.Optional, id = UrlParameter.Optional });
    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} </code></pre>
<p>That's it, you are configured to use ENV.Web.
Review the following articles on how to use it:</p>
<ol>
<li><a href="creating-the-server-api.html">creating the server api</a></li>
<li><a href="making-the-rest-api-updatable.html">making the rest api updatable</a></li>
<li><a href="create-view-model.html">create view model</a></li>
<li><a href="automatically-generating-order-id-on-a-new-row.html">automatically generating order id on a new row.html</a></li>
<li><a href="server-side-validation-made-easy.html">server side validation made easy</a></li>
<li><a href="additional-server-side-features.html">additional server side features</a></li>
<li><a href="exposing-a-migrated-report-to-the-web.html">exposing a migrated report to the web</a></li>
</ol>


                <br />
                        <a id="previousButton" class="btn btn-neutral float-left" style="visibility:hidden">Previous</a>

                        <a id="nextButton" class="btn btn-neutral" style="visibility:hidden;float:right">Next</a>
                    <hr />Help us improve,
                    <a href="https://github.com/FireflyMigration/firefly-doc/blob/master//30-Maintaining-the-Migrated-Application/95-Web-Development/20-ENV Web/01-Adding-ENV-Web-to-an-MVC-project.md" target="_blank">Edit this page on GitHub</a>
                    <br /> or email us at
                    <a href="mailto:info@fireflymigration.com?Subject=Firefly%20Documentation%20Website" target="_top">info@fireflymigration.com</a>
                </div>

                <!-- .content -->




            </div>
            <!-- .container-->

            <aside class="left-sidebar">
                <div class="wy-side-nav-search-ff">
                    <a href="" class="test">
                        <img src="assets/img/logo-big.png">
                    </a>
                </div>
                <div id="menuTree" </div>
            </aside>
            <!-- .left-sidebar -->

            <aside class="right-sidebar"></aside>
            <!-- .right-sidebar -->

            </div>
            <!-- .middle-->



        </div>


        <script src="assets/js/mermaid.js"></script>
        <script src="assets/js/prism-start.js"></script>
        <script src="assets/js/prism-clike.js"></script>
        <script src="assets/js/prism-markup.js"></script>
        <script src="assets/js/prism-css.js"></script>
        <script src="assets/js/prism-javascript.js"></script>

        <script src="assets/js/prism-diff.js"></script>
        <script src="assets/js/prism-csdiff.js"></script>
        <script src="assets/js/prism-function.js"></script>

        <script src="assets/js/jquery-3.1.1.js"></script>


        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-4806432-3', 'auto');
            ga('send', 'pageview');

        </script>
        <script src="assets/js/tree.js"></script>
        <script language="javascript">
            buildTree('menuTree', 'adding-env-web-to-an-mvc-project.html', 'previousButton', 'nextButton');
        </script>
</body>

</html>