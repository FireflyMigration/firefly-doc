<!DOCTYPE html>
<html lang="en" class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8" />
    <meta name="keywords" content="">

    <title>Adding my own Sql Functions</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="assets/css/toc.css" />
    <link rel="stylesheet" href="assets/css/highlight.css" />
    <link rel="stylesheet" href="assets/css/prism.css" />
    <link rel="stylesheet" href="assets/css/prism-csdiff.css" />


    <link rel="stylesheet" href="assets/css/theme_firefly.css" />
    <link rel="stylesheet" href="assets/css/mermaid.css" />
</head>

<body class="markdown-body" role="document">
    <div class="wrapper" id="root">
        <div class="backdrop"></div>
        <div class="top-bar" role="navigation" aria-label="footer navigation">
            <div style="display:flex;">
                <div>
                    <a id="menu" class="btn btn-neutral">&#9776; </a>
                </div>
                <img src="assets/img/logo-big.png">
            </div>
            <div>
                <a id="previousButton" class="btn btn-neutral" style="visibility:hidden">Previous</a>
                <a id="nextButton" class="btn btn-neutral" style="visibility:hidden">Next</a>
            </div>
        </div>
        <div class="middle">

            <div class="container">

                <div class="content"><h1 id="adding-my-own-sql-functions">Adding my own Sql Functions</h1>
<p>Sometimes you may want to add your own custom Sql functions that will do whatever it is you want them to do.</p>
<p>Let's start with a basic query:</p>
<pre data-line="" class="language-csdiff line-numbers"><code>var c = new Models.Products();
Shared.DataSources.Northwind.TestSql(
    Select(
        c.ProductID,
        c.ProductName,
        c.UnitPrice
    )
    .From(c)); </code></pre>
<h3 id="adding-custom-sql-syntax">Adding custom Sql Syntax</h3>
<p>Let's say that we want to add a fixed tax to all UnitPrices and there is no prepared sql to do that.
The first thing you can do is use the <code>SqlPart</code> class.</p>
<pre data-line="7" class="language-csdiff line-numbers"><code> var c = new Models.Products();
Shared.DataSources.Northwind.TestSql(
    Select(
        c.ProductID,
        c.ProductName,
-       c.UnitPrice
        new  ENV.Utilities.SqlPart(c.UnitPrice," * 1.1") 
    )
    .From(c)); </code></pre>
<p>That'll do the trick whenever you need some sql syntax and can't find a build in solution.</p>
<h3 id="reusing-custom-sql-syntax">Reusing custom Sql Syntax</h3>
<p>You can create your own SQL method, that can be used anywhere in your code, by simply creating your own class and adding the methods to it.</p>
<p>For example, let's add our customer <code>MySqlFunctions</code> class:</p>
<pre data-line="" class="language-csdiff line-numbers"><code>public static class MySqlFunctions
{
    public static SqlPart AddTax(NumberColumn column)
    {
        return new SqlPart(column, " * 1.1");
    }
} </code></pre>
<p>And in our code, we'll just add a using statement for it and use it</p>
<pre data-line="3,11" class="language-csdiff line-numbers"><code>using static ENV.Utilities.EasySql;
using ENV.Utilities.EasySqlExtentions;
using static Northwind.MySqlFunctions;
...
 var c = new Models.Products();
Shared.DataSources.Northwind.TestSql(
    Select(
        c.ProductID,
        c.ProductName,
-       new  ENV.Utilities.SqlPart(c.UnitPrice," * 1.1")
        AddTax(c.UnitPrice)
    )
    .From(c)); </code></pre>
<h3 id="examples">Examples</h3>
<p>For more examples go to the <code>EasySql</code> and see how we've implemented many functions such as <code>IsIn</code>, <code>Count</code>, <code>Average</code> etc...</p>



                    <hr />Help us improve,
                    <a href="https://github.com/FireflyMigration/firefly-doc/blob/master//30-Maintaining-the-Migrated-Application/63-EasySql-Writing-Better-Sql/05-Adding-my-own-Sql-Functions.md" target="_blank">Edit this page on GitHub</a>
                    <br /> or email us at
                    <a href="mailto:info@fireflymigration.com?Subject=Firefly%20Documentation%20Website" target="_top">info@fireflymigration.com</a>
                </div>

                <!-- .content -->




            </div>
            <!-- .container-->

            <aside class="left-sidebar">
                <div class="wy-side-nav-search-ff">
                    <a href="" class="test">
                        
                    </a>
                </div>
                <div id="menuTree" </div>
            </aside>
            <!-- .left-sidebar -->

            <aside class="right-sidebar"></aside>
            <!-- .right-sidebar -->

            </div>
            <!-- .middle-->



        </div>


        <script src="assets/js/mermaid.js"></script>
        <script src="assets/js/prism-start.js"></script>
        <script src="assets/js/prism-clike.js"></script>
        <script src="assets/js/prism-markup.js"></script>
        <script src="assets/js/prism-css.js"></script>
        <script src="assets/js/prism-javascript.js"></script>

        <script src="assets/js/prism-diff.js"></script>
        <script src="assets/js/prism-csdiff.js"></script>
        <script src="assets/js/prism-function.js"></script>

        <script src="assets/js/jquery-3.1.1.js"></script>


        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-4806432-3', 'auto');
            ga('send', 'pageview');

        </script>
        <script src="assets/js/tree.js"></script>
        <script language="javascript">
            buildTree('menuTree', 'adding-my-own-sql-functions.html', 'previousButton', 'nextButton');
        </script>
</body>

</html>