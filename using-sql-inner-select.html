<!DOCTYPE html>
<html lang="en" class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8" />
    <meta name="keywords" content="InnerSelectHelper">

    <title>Using SQL inner select</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="assets/css/toc.css" />
    <link rel="stylesheet" href="assets/css/highlight.css" />
    <link rel="stylesheet" href="assets/css/prism.css" />
    <link rel="stylesheet" href="assets/css/prism-csdiff.css" />


    <link rel="stylesheet" href="assets/css/theme_firefly.css" />
    <link rel="stylesheet" href="assets/css/mermaid.css" />
</head>

<body class="markdown-body" role="document">
    <div class="wrapper" id="root">
        <div class="backdrop"></div>
        <div class="top-bar" role="navigation" aria-label="footer navigation">
            <div style="display:flex;">
                <div>
                    <a id="menu" class="btn btn-neutral">&#9776; </a>
                </div>
                <img src="assets/img/logo-big.png">
            </div>
            <div>
                <a id="previousButton" class="btn btn-neutral" style="visibility:hidden">Previous</a>
                <a id="nextButton" class="btn btn-neutral" style="visibility:hidden">Next</a>
            </div>
        </div>
        <div class="middle">

            <div class="container">

                <div class="content"><h1 id="using-sql-inner-select">Using SQL inner select</h1>
<p>When approaching performance problems, a lot of time I hear developers talking about moving the code to SQL stored procedures to solve them.<br />
Usually I disagree, many of the powers of SQL can be available easily in your code without the cost of rewriting the code in Store procedure, or even worth, maintaining the code in stored procedure.</p>
<p>The most effective tool is &quot;Inner Selects&quot;.</p>
<p>In this two videos we'll use the <code>InnerSelectHelper</code> class to reduce 1660 SQL queries to 1, and improve performance by 75%.</p>
<p>To Learn more about the inner workings of using Inner Selects in the code see <a href="Inner-Select-and-SQL-Evaluated-Columns-in-depth.html">Inner Select and SQL Evaluated Columns in depth</a></p>
<h3 id="using-the-innerselecthelper">Using the InnerSelectHelper</h3>
<ul>
<li>Define the InnerSelectHelper class in the code</li>
</ul>
<pre data-line="" class="language-csdiff line-numbers"><code>var h = new ENV.Data.InnerSelectHelper(this); </code></pre>
<h4 id="create-an-exist-inner-select">Create an Exist Inner Select</h4>
<p>Parameters:</p>
<ol>
<li>The column that will be used as the result</li>
<li>The Child entity to check in (in our case, the Order_Details entity)</li>
<li>The Where to use in that entity (in our case, the OrderID should match)</li>
</ol>
<pre data-line="" class="language-csdiff line-numbers"><code>h.TurnToExist(V_HasOrderDetails, Order_Details, Order_Details.OrderID.IsEqualTo(Orders.OrderID)); </code></pre>
<h4 id="create-a-sum-inner-select">Create a Sum Inner Select</h4>
<p>Parameters:</p>
<ol>
<li>The column that will be used as the result.</li>
<li>The column to sum in the Child entity (in our case, Quantity).</li>
<li>The Where to use in that entity (in our case, the OrderID should match)</li>
</ol>
<pre data-line="" class="language-csdiff line-numbers"><code>h.TurnToSum(TotalQuantity, Order_Details.Quantity, Order_Details.OrderID.IsEqualTo(Orders.OrderID)); </code></pre>
<hr />
<iframe width="560" height="315" src="https://www.youtube.com/embed/kOT8WViZVoI?list=PL1DEQjXG2xnKhg_Tj9SMezkmm9mzpy4to" frameborder="0" allowfullscreen></iframe>



                    <hr />Help us improve,
                    <a href="https://github.com/FireflyMigration/firefly-doc/blob/master//30-Maintaining-the-Migrated-Application/50-Improve-Performance/08-Using-SQL-inner-select/index.md" target="_blank">Edit this page on GitHub</a>
                    <br /> or email us at
                    <a href="mailto:info@fireflymigration.com?Subject=Firefly%20Documentation%20Website" target="_top">info@fireflymigration.com</a>
                </div>

                <!-- .content -->




            </div>
            <!-- .container-->

            <aside class="left-sidebar">
                <div class="wy-side-nav-search-ff">
                    <a href="" class="test">
                        
                    </a>
                </div>
                <div id="menuTree" </div>
            </aside>
            <!-- .left-sidebar -->

            <aside class="right-sidebar"></aside>
            <!-- .right-sidebar -->

            </div>
            <!-- .middle-->



        </div>


        <script src="assets/js/mermaid.js"></script>
        <script src="assets/js/prism-start.js"></script>
        <script src="assets/js/prism-clike.js"></script>
        <script src="assets/js/prism-markup.js"></script>
        <script src="assets/js/prism-css.js"></script>
        <script src="assets/js/prism-javascript.js"></script>

        <script src="assets/js/prism-diff.js"></script>
        <script src="assets/js/prism-csdiff.js"></script>
        <script src="assets/js/prism-function.js"></script>

        <script src="assets/js/jquery-3.1.1.js"></script>


        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-4806432-3', 'auto');
            ga('send', 'pageview');

        </script>
        <script src="assets/js/tree.js"></script>
        <script language="javascript">
            buildTree('menuTree', 'using-sql-inner-select.html', 'previousButton', 'nextButton');
        </script>
</body>

</html>