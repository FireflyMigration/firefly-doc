<!DOCTYPE html>
<html lang="en" class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta charset="utf-8" />
    <meta name="keywords" content="">

    <title>Exposing a migrated report to the web</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="assets/css/toc.css" />
    <link rel="stylesheet" href="assets/css/highlight.css" />
    <link rel="stylesheet" href="assets/css/prism.css" />
    <link rel="stylesheet" href="assets/css/prism-csdiff.css" />


    <link rel="stylesheet" href="assets/css/theme_firefly.css" />
    <link rel="stylesheet" href="assets/css/mermaid.css" />
</head>

<body class="markdown-body" role="document">
    <div class="wrapper">

        <div class="middle">

            <div class="container">

                <div class="content" role="navigation" aria-label="footer navigation">
                    <a id="previousButton" class="btn btn-neutral float-left" style="visibility:hidden">Previous</a>
                    <a id="nextButton" class="btn btn-neutral float-right" style="visibility:hidden">Next</a>
                </div>
                <div class="content"><h1 id="exposing-a-migrated-report-to-the-web">Exposing a migrated report to the web</h1>
<p>We want to reuse the migrated report called PrintOrder from the Northwind.Order project.</p>
<ul>
<li>First we'll add a reference to the <code>Northwind.Order.dll</code> that is in the <code>bin</code> directory</li>
<li>We'll add a call to it in the <code>Controllers\HomeController.cs</code></li>
</ul>
<pre data-line="6,7,8,9,10" class="language-csdiff line-numbers"><code>public ActionResult Index()
{
    return View();
}

[ENV.Web.PrintToPDF]
public void Print(int id)
{
     new Northwind.Orders.Print_Order().Run(id);
}

public ActionResult About()
{
    ViewBag.Message = "Your application description page.";

    return View();
} </code></pre>
<ul>
<li>We've added the <code>Print</code> method, that receives an <code>id</code> and in that method we called the migrated <code>Print_Order</code> code, and sent it the <code>id</code></li>
<li>We've used the <code>[ENV.Web.PrintToPDF]</code> attribute, which will hijack any printing that happens within the <code>Print</code> method, and create a pdf file and return it to the browser when we're done.</li>
</ul>
<h3 id="the-structure-of-the-url">The structure of the url</h3>
<p>The url structure that will be used here is as follow: <code>{controller}/{method}/{id}?param1={param1}&amp;param2={param2}</code>
In our case that will be <code>Home/Print/10249</code>, where Home is the controller, Print is the method and id is 10249.
If the method would have received more parameters, it would use their name and values after the <code>?</code> sign in the url.</p>
<p>We can use this method to expose any business process as an easy api that can be used from the browser</p>
<p>Here's the result:</p>
<p><img src="2017-10-16_06h33_25.gif" alt="2017 10 16 06H33 25" /></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/KMiPQ4zSBdM" frameborder="0" allowfullscreen></iframe>



                        <a id="previousButton" class="btn btn-neutral float-left" style="visibility:hidden">Previous</a>

                        <a id="nextButton" class="btn btn-neutral" style="visibility:hidden;float:right">Next</a>
                    <hr />Help us improve,
                    <a href="https://github.com/FireflyMigration/firefly-doc/blob/master//01-Development/02-Articles/Web-Development/00-ENV Web/01-Web Development Tutorial/33-Exposing a migrated report to the web.md" target="_blank">Edit this page on GitHub</a>
                    <br /> or email us at
                    <a href="mailto:info@fireflymigration.com?Subject=Firefly%20Documentation%20Website" target="_top">info@fireflymigration.com</a>
                </div>

                <!-- .content -->




            </div>
            <!-- .container-->

            <aside class="left-sidebar">
                <div class="wy-side-nav-search-ff">
                    <a href="" class="test">
                        <img src="assets/img/logo-big.png">
                    </a>
                </div>
                <div id="menuTree" </div>
            </aside>
            <!-- .left-sidebar -->

            <aside class="right-sidebar"></aside>
            <!-- .right-sidebar -->

            </div>
            <!-- .middle-->



        </div>


        <script src="assets/js/mermaid.js"></script>
        <script src="assets/js/prism-start.js"></script>
        <script src="assets/js/prism-clike.js"></script>
        <script src="assets/js/prism-markup.js"></script>
        <script src="assets/js/prism-css.js"></script>
        <script src="assets/js/prism-javascript.js"></script>

        <script src="assets/js/prism-diff.js"></script>
        <script src="assets/js/prism-csdiff.js"></script>
        <script src="assets/js/prism-function.js"></script>

        <script src="assets/js/jquery-3.1.1.js"></script>


        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-4806432-3', 'auto');
            ga('send', 'pageview');

        </script>
        <script src="assets/js/tree.js"></script>
        <script language="javascript">
            buildTree('menuTree', 'exposing-a-migrated-report-to-the-web.html', 'previousButton', 'nextButton');
        </script>
</body>

</html>