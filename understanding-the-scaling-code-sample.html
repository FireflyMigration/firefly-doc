<!DOCTYPE html>
<html lang="en" class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8" />
    <meta name="keywords" content="">

    <title>Understanding the Scaling Code Sample</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="assets/css/toc.css" />
    <link rel="stylesheet" href="assets/css/highlight.css" />
    <link rel="stylesheet" href="assets/css/prism.css" />
    <link rel="stylesheet" href="assets/css/prism-csdiff.css" />


    <link rel="stylesheet" href="assets/css/theme_firefly.css" />
    <link rel="stylesheet" href="assets/css/mermaid.css" />
</head>

<body class="markdown-body" role="document">
    <div class="wrapper" id="root">
        <div class="backdrop"></div>
        <div class="top-bar" role="navigation" aria-label="footer navigation">
            <div style="display:flex;">
                <div>
                    <a id="menu" class="btn btn-neutral">&#9776; </a>
                </div>
                <img src="assets/img/logo-big.png">
            </div>
            <div>
                <a id="previousButton" class="btn btn-neutral" style="visibility:hidden">Previous</a>
                <a id="nextButton" class="btn btn-neutral" style="visibility:hidden">Next</a>
            </div>
        </div>
        <div class="middle">

            <div class="container">

                <div class="content"><h1 id="understanding-the-scaling-code-sample">Understanding the Scaling Code Sample</h1>
<p>The scaling code sample is intended to help developers automatically scale all the application screens to the size of the user's monitor.</p>
<p>Its demo can be activated from the <code>Developer Tools\Demo Scaling</code> menu.</p>
<p>Here's how it works,</p>
<p>When you click on the menu the method <code>ToggleScalingDemo</code> in the <code>Form</code> class in <code>ENV</code> is called.</p>
<p>It then calls the <code>GetCurrentScreenSize</code> method, which opens a form with <code>FitToMdi = true</code> and measures it's size to know that size of the current user screen.</p>
<p>Then it calls the <code>MatchScreenSize</code> method, which sets the <code>ScalingFactor</code> that will be used to scale all the forms that are opened from now on.</p>
<h2 id="how-is-the-scaling-factor-determined">How is the Scaling Factor Determined?</h2>
<p>The scaling factor is the ratio between the original screen width used in the development and the current width of the screen.</p>
<p>For example, if the original developer screen width was 900 and the current screen width is 1800 then the scaling factor for the width will be 2.</p>
<h2 id="how-is-the-original-developer-screen-width-determined">How is the original developer screen width determined</h2>
<p>By default, the scaling code demo tries to deduce the original developer screen width, by recording the bottom right position of all the screens that were opened so far in the application.</p>
<p>These values are stored in the <code>_maxBottom</code> and <code>_maxRight</code> fields.</p>
<p>And are updated in the <code>OnBeforeBinding</code> method see:</p>
<pre data-line="7,8,9,10,11,12,13" class="language-csdiff line-numbers"><code>        protected override void OnBeforeBinding()
        {
            base.OnBeforeBinding();
            var s = new Size(Right, Bottom);
            if (StartPosition != WindowStartPosition.Custom)
                s = new Size(Width, Height);
            if (OriginalSizeForScaling == Size.Empty &amp;&amp; !FitToMDI)
            {
                if (s.Height &gt; _maxBottom)
                    _maxBottom = s.Height;
                if (s.Width &gt; _maxRight &amp;&amp; s.Width &lt; 1200)
                    _maxRight = s.Width;
            }
            if (AutomaticResizeScreens)
            {
                ScalingFactor = new SizeF((float)_mdiWidth / _maxRight, (float)_mdiHeight / _maxBottom);
            }
            if (_scalingFactor != new SizeF(1, 1))
                Scale(_scalingFactor);
...
        } </code></pre>
<p>Although this is useful for a demo, in real life it can cause some trouble.
Imagine the following scenario,</p>
<ol>
<li>The user started the application and opened a small screen.</li>
<li>the user runs the Scaling demo - and the scale is set to 2.</li>
<li>Now every screen will open with a scale of 2.</li>
<li>At this time, the user opens another screen that was developed to be very wide.</li>
<li>This will change the scaling factor and affect all the following screens.</li>
</ol>
<h3 id="how-can-we-set-the-original-developer-screen-sizes">How can we set the original developer screen sizes?</h3>
<p>This can be done by calling the <code>SetOriginalSize</code> when the application starts. Note that the size is not 1024 X 768 or the actual screen width, you actually need the size of the area where screens can be opened (without the menus, etc...) for example, in a screen where the resolution is 800 X 600 the size we used was 804, 489 (see the code for the <code>SetOriginalSizeTo800X600</code> method).</p>
<p>We recommend that you experiment with several different values until you've reached your desired result.</p>
<h3 id="can-we-set-a-different-scaling-factor-for-different-screens">Can we set a different scaling factor for different screens?</h3>
<p>You  can customize the scaling factors for each screen by simply setting the ScalingFactor property to the factor that you want before the <code>OnBeforeBinding</code> method is called.</p>



                    <hr />Help us improve,
                    <a href="https://github.com/FireflyMigration/firefly-doc/blob/master//30-Maintaining-the-Migrated-Application/70-User Interface/Understanding the Scaling Code Sample.md" target="_blank">Edit this page on GitHub</a>
                    <br /> or email us at
                    <a href="mailto:info@fireflymigration.com?Subject=Firefly%20Documentation%20Website" target="_top">info@fireflymigration.com</a>
                </div>

                <!-- .content -->




            </div>
            <!-- .container-->

            <aside class="left-sidebar">
                <div class="wy-side-nav-search-ff">
                    <a href="" class="test">
                        
                    </a>
                </div>
                <div id="menuTree" </div>
            </aside>
            <!-- .left-sidebar -->

            <aside class="right-sidebar"></aside>
            <!-- .right-sidebar -->

            </div>
            <!-- .middle-->



        </div>


        <script src="assets/js/mermaid.js"></script>
        <script src="assets/js/prism-start.js"></script>
        <script src="assets/js/prism-clike.js"></script>
        <script src="assets/js/prism-markup.js"></script>
        <script src="assets/js/prism-css.js"></script>
        <script src="assets/js/prism-javascript.js"></script>

        <script src="assets/js/prism-diff.js"></script>
        <script src="assets/js/prism-csdiff.js"></script>
        <script src="assets/js/prism-function.js"></script>

        <script src="assets/js/jquery-3.1.1.js"></script>


        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-4806432-3', 'auto');
            ga('send', 'pageview');

        </script>
        <script src="assets/js/tree.js"></script>
        <script language="javascript">
            buildTree('menuTree', 'understanding-the-scaling-code-sample.html', 'previousButton', 'nextButton');
        </script>
</body>

</html>