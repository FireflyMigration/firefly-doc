<!DOCTYPE html>
<html lang="en" class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta charset="utf-8" />
    <meta name="keywords" content="">

    <title>Using Firefly Profiler</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="assets/css/toc.css" />
    <link rel="stylesheet" href="assets/css/highlight.css" />
    <link rel="stylesheet" href="assets/css/prism.css" />
    <link rel="stylesheet" href="assets/css/prism-csdiff.css" />


    <link rel="stylesheet" href="assets/css/theme_firefly.css" />
    <link rel="stylesheet" href="assets/css/mermaid.css" />
</head>

<body class="markdown-body" role="document">
    <div class="wrapper">

        <div class="middle">

            <div class="container">

                <div class="content" role="navigation" aria-label="footer navigation">
                    <a id="previousButton" class="btn btn-neutral float-left" style="visibility:hidden">Previous</a>
                    <a id="nextButton" class="btn btn-neutral float-right" style="visibility:hidden">Next</a>
                </div>
                <div class="content"><h1 id="using-firefly-profiler">Using Firefly Profiler</h1>
<p>Firefly provides a Profiler tool which helps to analyze the application execution and find issue and performance bottlenecks.</p>
<ol>
<li>Starting the Profiler<br />
While the application is open, Right-Click on the status bar:<br />
<strong>Developer Tools -&gt; Profiler</strong> -&gt; Click <strong>Start Profiling</strong>, or use <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd></li>
</ol>
<p><img src="start_profiler.jpg" alt="" /></p>
<p>Run a process you would like to observe.</p>
<ol start="2">
<li>End the Profiler
Once the process is done, click <strong>End Profiling</strong> in the toolbar menu or <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd> again</li>
</ol>
<p><img src="end_profiler.jpg" alt="" /></p>
<ol start="3">
<li>Reviewing the Profiler results<br />
Clicking <strong>End Profiling</strong> will open the results window.</li>
</ol>
<p><img src="analyze_profiler.png" alt="" /></p>
<p>Let’s observe the results:</p>
<ol type="a">
<li>The process total elapsed time is 635 ms <strong>(1)</strong></li>
<li>The order of the Profiler result is based on the processing time (in ascending order). In our case we can see that the longest processing time is 278 ms (43.76% of the entire process) which was spent inside OnLeaveRow() and was called 830 times. <strong>(2)</strong></li>
<li>Profiler Colors:
<ul>
<li><strong>Black</strong> – Code Information</li>
<li><strong style="color: #800000;">Brown </strong>– Code related to the database</li>
<li><strong style="color: #ff0000;">Red</strong> –  Code Exception</li>
</ul>
</li>
<li>There is a Relation to table Customers. There were 830 SQL calls to the database and we can see that each query was sent several times to the database. <strong>(3)</strong><br />
This stems from the cache option which was not set to TRUE.<br />
Setting the cache to TRUE for the Customers model will reduce the number of calls dramatically and improve the performance.</li>
</ol>
<p><img src="code_models_customer.png" alt="" /></p>
<p>Running the same process again we can see the database access to the Customers table has been decreased significantly.</p>
<ol type="a">
<li>The processing time of the Customers table access was reduced to 19 ms from 114ms – <strong>an 83% improvement.</strong></li>
<li>There were only 89 SQL calls to the database instead of 830!</li>
<li>The Relation for each Customer occurred only once.</li>
</ol>
<p><img src="analyze_profiler2.png" alt="" /></p>
<ol start="4">
<li><p>Reviewing the Profiler options<br />
Right-Click on the results screen will bring a context menu with 6 options:</p>
<ul>
<li><strong>Details</strong> – You can Right-Click on any line to see the information such the actual SQL statement and the program path. You can also click Enter or hover above the line to see the details <strong>(4)</strong></li>
<li><strong>Copy Path</strong> – While parking on a controler or event, you can copy the code path to ease the search using the &quot;Go To All&quot; in Visual Studio . (e.g Northwind.Customers.ShowCustomers.OnLoad())</li>
<li><strong>Statistics</strong> - This will provide statistics for a specific phase such as, how many times the taks it being called in this process</li>
<li><strong>Save</strong> – You can save the profiler result to a file.</li>
<li><strong>Large Fonts</strong> – Will enlarge the fonts on the results screen</li>
<li><strong>Search</strong></li>
</ul>
</li>
<li><p>Open saved Profiler file</p>
</li>
</ol>
<p><img src="open_profiler.jpg" alt="" /></p>
<ol start="6">
<li><p>Profiler settings in the INI<br />
To use the profiler for the Web or without using Developer tools,
Simply add an entry to the INI file in the [MAGIC_ENV] section:</p>
<pre><code> Profiler= c:\temp\myfile.prof
</code></pre>
</li>
</ol>
<p>Or as an argumant from the command line:</p>
<pre><code>    /Profiler= *c:\temp\myfile.prof
</code></pre>
<p>Notice that a Profiler for the Web will create a file for each request.</p>
<ol start="7">
<li>Profiler for Parallel programs<br />
To start profiling parallel context stand on the window of the context you would like to debug and press <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd>, that will start profiling.
To end profiling press <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd> again.</li>
</ol>
<p>The Profiler is part of the migrated solution but you can also download it from here:
<a href="http://doc.fireflymigration.com/fireflyprofiler.html">http://doc.fireflymigration.com/fireflyprofiler.html</a></p>


                <br />
                        <a id="previousButton" class="btn btn-neutral float-left" style="visibility:hidden">Previous</a>

                        <a id="nextButton" class="btn btn-neutral" style="visibility:hidden;float:right">Next</a>
                    <hr />Help us improve,
                    <a href="https://github.com/FireflyMigration/firefly-doc/blob/master//30-Maintaining-the-Migrated-Application/20-Debugging-the-Migrated-Application/10-FireflyProfiler/10-Using-Firefly-Profiler/index.md" target="_blank">Edit this page on GitHub</a>
                    <br /> or email us at
                    <a href="mailto:info@fireflymigration.com?Subject=Firefly%20Documentation%20Website" target="_top">info@fireflymigration.com</a>
                </div>

                <!-- .content -->




            </div>
            <!-- .container-->

            <aside class="left-sidebar">
                <div class="wy-side-nav-search-ff">
                    <a href="" class="test">
                        <img src="assets/img/logo-big.png">
                    </a>
                </div>
                <div id="menuTree" </div>
            </aside>
            <!-- .left-sidebar -->

            <aside class="right-sidebar"></aside>
            <!-- .right-sidebar -->

            </div>
            <!-- .middle-->



        </div>


        <script src="assets/js/mermaid.js"></script>
        <script src="assets/js/prism-start.js"></script>
        <script src="assets/js/prism-clike.js"></script>
        <script src="assets/js/prism-markup.js"></script>
        <script src="assets/js/prism-css.js"></script>
        <script src="assets/js/prism-javascript.js"></script>

        <script src="assets/js/prism-diff.js"></script>
        <script src="assets/js/prism-csdiff.js"></script>
        <script src="assets/js/prism-function.js"></script>

        <script src="assets/js/jquery-3.1.1.js"></script>


        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-4806432-3', 'auto');
            ga('send', 'pageview');

        </script>
        <script src="assets/js/tree.js"></script>
        <script language="javascript">
            buildTree('menuTree', 'using-firefly-profiler.html', 'previousButton', 'nextButton');
        </script>
</body>

</html>