<!DOCTYPE html>
<html lang="en" class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8" />
    <meta name="keywords" content="batch, businessprocess, report, sections, groups">

    <title>Printing group footer for every ship city</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="assets/css/toc.css" />
    <link rel="stylesheet" href="assets/css/highlight.css" />
    <link rel="stylesheet" href="assets/css/prism.css" />
    <link rel="stylesheet" href="assets/css/prism-csdiff.css" />


    <link rel="stylesheet" href="assets/css/theme_firefly.css" />
    <link rel="stylesheet" href="assets/css/mermaid.css" />
</head>

<body class="markdown-body" role="document">
    <div class="wrapper" id="root">
        <div class="backdrop"></div>
        <div class="top-bar" role="navigation" aria-label="footer navigation">
            <div style="display:flex;">
                <div>
                    <a id="menu" class="btn btn-neutral">&#9776; </a>
                </div>
                <img src="assets/img/logo-big.png">
            </div>
            <div>
                <a id="previousButton" class="btn btn-neutral" style="visibility:hidden">Previous</a>
                <a id="nextButton" class="btn btn-neutral" style="visibility:hidden">Next</a>
            </div>
        </div>
        <div class="middle">

            <div class="container">

                <div class="content"><h1 id="printing-group-footer-for-every-ship-city">Printing group footer for every ship city</h1>
<iframe width="560" height="315" src="https://www.youtube.com/embed/hqnUAz_GO_c?list=PL1DEQjXG2xnLss44EgCJq1bAM-Blgf2jd" frameborder="0" allowfullscreen></iframe>
<hr />
<p>Now that we have seen how to print a group header and control its printing, let's add a group footer that will display the number of orders from each city. We need to:</p>
<ol>
<li>Add a &quot;OrdersPerCity&quot; NumberColumn that will store the number of orders
This column will be updated with 0 in the <em>GroupEnter</em> and accumulate its value in the <em>OnLeaveRow</em></li>
<li>Add a <em>CitySuffix</em> layout section and place the &quot;OrdersPerCity&quot; column</li>
<li>Add the <em>GroupLeave</em> and add the WriteTo of the new section</li>
</ol>
<pre data-line="1,7,9,10,11,12,16" class="language-csdiff line-numbers"><code>public readonly NumberColumn OrdersPerCity = new NumberColumn("Orders Per City");
public Print_Orders()
{
    Groups[Orders1.ShipCity].Enter += () =&gt;
    {
        _layout.Customer.WriteTo(_ioPrint_Order);
        OrdersPerCity.Value = 0;
    };
    Groups[Orders1.ShipCity].Leave += () =&gt;
    {
        _layout.GroupLeave.WriteTo(_ioPrint_Order);
    };
}
protected override void OnLeaveRow()
{
    OrdersPerCity.Value++;
    _layout.Body.WriteTo(_ioPrint_Order);
} </code></pre>
<p>And this is the result:<br />
<img src="2018-03-07_10h18_09.jpg" alt="2018 03 07 10H18 09" /></p>
<ul>
<li><a href="exercise-using-groups.html">Exercise Using Groups</a></li>
</ul>



                    <hr />Help us improve,
                    <a href="https://github.com/FireflyMigration/firefly-doc/blob/master//10-Developer-Guide/81-Reports/70-Using-Groups-to-Print-a-Footer-for-every-Ship-City/index.md" target="_blank">Edit this page on GitHub</a>
                    <br /> or email us at
                    <a href="mailto:info@fireflymigration.com?Subject=Firefly%20Documentation%20Website" target="_top">info@fireflymigration.com</a>
                </div>

                <!-- .content -->




            </div>
            <!-- .container-->

            <aside class="left-sidebar">
                <div class="wy-side-nav-search-ff">
                    <a href="" class="test">
                        
                    </a>
                </div>
                <div id="menuTree" </div>
            </aside>
            <!-- .left-sidebar -->

            <aside class="right-sidebar"></aside>
            <!-- .right-sidebar -->

            </div>
            <!-- .middle-->



        </div>


        <script src="assets/js/mermaid.js"></script>
        <script src="assets/js/prism-start.js"></script>
        <script src="assets/js/prism-clike.js"></script>
        <script src="assets/js/prism-markup.js"></script>
        <script src="assets/js/prism-css.js"></script>
        <script src="assets/js/prism-javascript.js"></script>

        <script src="assets/js/prism-diff.js"></script>
        <script src="assets/js/prism-csdiff.js"></script>
        <script src="assets/js/prism-function.js"></script>

        <script src="assets/js/jquery-3.1.1.js"></script>


        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-4806432-3', 'auto');
            ga('send', 'pageview');

        </script>
        <script src="assets/js/tree.js"></script>
        <script language="javascript">
            buildTree('menuTree', 'using-groups-to-print-a-footer-for-every-ship-city.html', 'previousButton', 'nextButton');
        </script>
</body>

</html>